<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Guide: Secure S3 File Transfer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Tech -->
    <!-- Application Structure Plan: The SPA is designed as an interactive, single-page dashboard. It starts with a high-level, clickable architecture diagram. Clicking a component smoothly scrolls to a "deep-dive" section that explains that component's role and configuration. This is more user-friendly than a linear document, allowing users to explore components in any order. The structure includes an interactive demo at the end to provide a hands-on feel for how presigned URLs work, solidifying the user's understanding of the core concept. -->
    <!-- Visualization & Content Choices: 
        - Architecture Diagram: Recreated using HTML/CSS (Tailwind) instead of an image or SVG for interactivity and responsiveness. Goal: Organize/Inform. Interaction: Click to scroll.
        - Component Features (Encryption, Versioning, etc.): Presented as info cards with icons for quick visual parsing. Goal: Inform.
        - Presigned URL Flow: Explained in a step-by-step process diagram (HTML/CSS) to clarify the sequence. Goal: Explain a process.
        - Logging Comparison: A two-column layout is used to clearly compare S3 Access Logs and CloudTrail. Goal: Compare.
        - Interactive Demo: Uses HTML form elements and JavaScript to simulate the generation of a temporary access URL, providing a tangible learning experience. Goal: Engage/Teach.
        - NO SVG/Mermaid used. No data charts are needed as the source material is conceptual.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f7f4;
            color: #4a4a4a;
        }
        .component {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .component:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.03);
        }
        .arrow {
            position: relative;
        }
        .arrow::after {
            content: '‚Üí';
            position: absolute;
            font-size: 2rem;
            color: #9ca3af;
        }
        .arrow-down::after {
            content: '‚Üì';
        }
        .section-title {
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white py-6 shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Interactive Guide to Secure S3 File Transfer</h1>
            <p class="text-lg text-gray-500 mt-2">An explorable overview of AWS S3, temporary access, and logging.</p>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <!-- Architecture Section -->
        <section id="architecture" class="my-12">
            <h2 class="text-2xl md:text-3xl font-bold text-center mb-4 text-gray-700 section-title">Solution Architecture</h2>
            <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">
                This architecture ensures that files are stored securely and access is tightly controlled. Your application never handles AWS credentials directly; instead, it orchestrates access by requesting temporary, secure links from a backend service. Click on any component to learn more.
            </p>
            <div class="w-full max-w-5xl mx-auto p-4 md:p-8 bg-white rounded-xl shadow-md border border-gray-200">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center text-center">
                    <!-- Column 1: User & Frontend -->
                    <div class="space-y-4">
                        <div data-target="user-frontend-details" class="component cursor-pointer p-4 border-2 border-dashed border-blue-300 bg-blue-50 rounded-lg">
                            <div class="text-4xl">üë§</div>
                            <h3 class="font-bold text-blue-800">User & Frontend App</h3>
                            <p class="text-sm text-blue-600">Requests secure upload/download links.</p>
                        </div>
                    </div>
                    <!-- Column 2: Backend -->
                    <div class="space-y-4">
                        <div class="flex justify-center items-center h-full">
                             <div class="text-3xl text-gray-400 font-mono hidden md:block">‚Üí</div>
                             <div class="text-3xl text-gray-400 font-mono md:hidden">‚Üì</div>
                        </div>
                        <div data-target="backend-details" class="component cursor-pointer p-4 border-2 border-dashed border-purple-300 bg-purple-50 rounded-lg">
                            <div class="text-4xl">‚öôÔ∏è</div>
                            <h3 class="font-bold text-purple-800">Backend Service</h3>
                            <p class="text-sm text-purple-600">API Gateway & Lambda generate Presigned URLs.</p>
                        </div>
                         <div class="flex justify-center items-center h-full">
                             <div class="text-3xl text-gray-400 font-mono hidden md:block">‚Üí</div>
                             <div class="text-3xl text-gray-400 font-mono md:hidden">‚Üì</div>
                        </div>
                    </div>
                    <!-- Column 3: AWS Services -->
                    <div class="space-y-4">
                        <div data-target="s3-details" class="component cursor-pointer p-4 border-2 border-dashed border-green-300 bg-green-50 rounded-lg">
                             <div class="text-4xl">üóÑÔ∏è</div>
                            <h3 class="font-bold text-green-800">AWS S3 Bucket</h3>
                            <p class="text-sm text-green-600">Secure, encrypted file storage.</p>
                        </div>
                        <div class="text-3xl text-gray-400 font-mono">‚Üì</div>
                        <div data-target="logging-details" class="component cursor-pointer p-4 border-2 border-dashed border-yellow-300 bg-yellow-50 rounded-lg">
                            <div class="text-4xl">üìù</div>
                            <h3 class="font-bold text-yellow-800">Logging Services</h3>
                            <p class="text-sm text-yellow-600">CloudTrail & S3 Access Logs.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Deep Dive Sections -->
        <div class="space-y-16">
            <section id="user-frontend-details" class="p-8 bg-white rounded-xl shadow-md border border-gray-200">
                <h2 class="text-2xl font-bold text-blue-800 mb-4 section-title">üë§ The User & Frontend</h2>
                <p class="text-gray-600 mb-6">The frontend is the user-facing part of the system, running in the browser. Its primary security role is to **never handle permanent AWS credentials**. Instead, it interacts with a trusted backend to orchestrate secure file operations.</p>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <h3 class="font-semibold text-lg text-blue-700 mb-2">Upload Process</h3>
                        <ol class="list-decimal list-inside space-y-2 text-gray-700">
                            <li>User selects a file in the browser.</li>
                            <li>Frontend requests a secure **upload link** from the backend.</li>
                            <li>Backend returns a temporary, one-time-use Presigned URL.</li>
                            <li>Frontend uploads the file directly to S3 using this URL.</li>
                        </ol>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <h3 class="font-semibold text-lg text-blue-700 mb-2">Download Process</h3>
                        <ol class="list-decimal list-inside space-y-2 text-gray-700">
                            <li>User clicks a download button for a specific file.</li>
                            <li>Frontend requests a secure **download link** from the backend.</li>
                            <li>Backend returns a temporary, short-lived Presigned URL.</li>
                            <li>Browser uses the URL to download the file directly from S3.</li>
                        </ol>
                    </div>
                </div>
            </section>
            
            <section id="backend-details" class="p-8 bg-white rounded-xl shadow-md border border-gray-200">
                <h2 class="text-2xl font-bold text-purple-800 mb-4 section-title">‚öôÔ∏è The Backend Gatekeeper</h2>
                 <p class="text-gray-600 mb-6">The backend, composed of API Gateway and AWS Lambda, acts as a trusted gatekeeper. It is the only part of the system (besides administrators) with permissions to interact with S3 directly. Its sole purpose in this context is to validate requests and generate temporary, single-use Presigned URLs.</p>
                <div class="bg-purple-50 p-6 rounded-lg border border-purple-200">
                    <h3 class="font-semibold text-lg text-purple-700 mb-2">Key Responsibilities</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><b>Authentication & Authorization:</b> Verifies the user or application making the request has the right to access the requested file (this logic would be built into the Lambda function).</li>
                        <li><b>Generate Presigned URLs:</b> Uses its IAM Role to ask S3 for a temporary URL for a specific action (`getObject` or `putObject`).</li>
                        <li><b>Enforce Security Policy:</b> Can add further conditions, like limiting file sizes or types, before generating a URL.</li>
                        <li><b>Audit Trail:</b> All actions taken by the Lambda function are logged in CloudTrail, providing a clear record of who requested access to what, and when.</li>
                    </ul>
                </div>
            </section>

            <section id="s3-details" class="p-8 bg-white rounded-xl shadow-md border border-gray-200">
                <h2 class="text-2xl font-bold text-green-800 mb-4 section-title">üóÑÔ∏è Secure S3 Storage</h2>
                <p class="text-gray-600 mb-6">The S3 bucket is the foundation of the storage system, configured with multiple layers of security to protect data at rest and control access.</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                        <h3 class="font-semibold text-lg text-green-700 mb-2">Block Public Access</h3>
                        <p class="text-gray-700">This is **ON** by default and is the most critical setting. It ensures that no file can be made public by mistake through bucket policies or ACLs.</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                        <h3 class="font-semibold text-lg text-green-700 mb-2">Server-Side Encryption (SSE-KMS)</h3>
                        <p class="text-gray-700">Files are automatically encrypted the moment they are written to the disk in S3. AWS manages the encryption keys, providing seamless data protection at rest.</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                        <h3 class="font-semibold text-lg text-green-700 mb-2">Bucket Versioning</h3>
                        <p class="text-gray-700">Enabled to protect against accidental overwrites or deletions. Every version of a file is preserved, allowing for easy recovery.</p>
                    </div>
                </div>
            </section>
            
            <section id="logging-details" class="p-8 bg-white rounded-xl shadow-md border border-gray-200">
                <h2 class="text-2xl font-bold text-yellow-800 mb-4 section-title">üìù Comprehensive Logging</h2>
                 <p class="text-gray-600 mb-6">Visibility is key to security. Two distinct types of logging work together to provide a complete picture of all activity related to your S3 bucket.</p>
                 <div class="grid md:grid-cols-2 gap-8">
                     <div class="bg-yellow-50 p-6 rounded-lg border border-yellow-200">
                         <h3 class="font-semibold text-lg text-yellow-700 mb-2">AWS CloudTrail (The "Who" and "What")</h3>
                         <p class="text-gray-700 mb-4">Tracks all API calls made to your AWS account.</p>
                         <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><b>Answers:</b> Who generated a presigned URL? When was a bucket policy changed?</li>
                            <li><b>Scope:</b> Account-wide API activity.</li>
                             <li><b>Key Insight:</b> Audits administrative actions and backend requests for temporary access.</li>
                         </ul>
                     </div>
                     <div class="bg-yellow-50 p-6 rounded-lg border border-yellow-200">
                         <h3 class="font-semibold text-lg text-yellow-700 mb-2">S3 Server Access Logs (The "How" and "Where from")</h3>
                         <p class="text-gray-700 mb-4">Records every direct request made to your S3 bucket.</p>
                         <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><b>Answers:</b> Which IP address downloaded the file using a presigned URL? Was the request successful?</li>
                            <li><b>Scope:</b> Bucket-specific HTTP requests.</li>
                             <li><b>Key Insight:</b> Provides a raw, detailed log of every file access, successful or not.</li>
                         </ul>
                     </div>
                 </div>
            </section>
        </div>

        <!-- Interactive Demo Section -->
        <section id="demo" class="my-16">
            <h2 class="text-2xl md:text-3xl font-bold text-center mb-4 text-gray-700 section-title">Interactive Demo</h2>
            <p class="text-center text-gray-600 mb-8 max-w-3xl mx-auto">
                Simulate the process of generating a temporary download link. Select a mock file and click the button. This demonstrates how the frontend would request a secure, time-limited URL from the backend without ever handling sensitive credentials.
            </p>
            <div class="w-full max-w-2xl mx-auto p-8 bg-white rounded-xl shadow-lg border border-gray-200">
                <div class="space-y-4">
                    <div>
                        <label for="file-select" class="block text-sm font-medium text-gray-700 mb-1">Select a Mock File:</label>
                        <select id="file-select" class="block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="reports/quarterly-earnings.pdf">reports/quarterly-earnings.pdf</option>
                            <option value="design/project-alpha-logo.png">design/project-alpha-logo.png</option>
                            <option value="legal/master-service-agreement.docx">legal/master-service-agreement.docx</option>
                        </select>
                    </div>
                    <button id="generate-link-btn" class="w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-150 ease-in-out">
                        Generate Temporary Download Link
                    </button>
                </div>
                <div id="demo-output" class="mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200" style="display: none;">
                    <h3 class="font-bold text-gray-800 mb-2">Generated Presigned URL:</h3>
                    <p id="presigned-url-output" class="text-sm text-red-600 bg-red-50 p-3 rounded break-all font-mono"></p>
                    <div class="mt-4 pt-4 border-t border-gray-200">
                        <h4 class="font-semibold text-gray-700 mb-2">What just happened?</h4>
                        <ol class="list-decimal list-inside space-y-2 text-sm text-gray-600">
                            <li>Your browser (the "Frontend") sent the file name to a secure backend API.</li>
                            <li>The backend "Lambda" function verified you have permission.</li>
                            <li>The Lambda used its secure IAM role to request a temporary URL from S3, valid for only 5 minutes.</li>
                            <li>The unique, signed URL was returned to the browser. It contains temporary credentials in its query string.</li>
                            <li>Anyone with this link can now download the file until it expires. No AWS account is needed.</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>

    </main>
    
    <footer class="text-center py-8 mt-8 border-t border-gray-200">
        <p class="text-gray-500">Interactive guide generated from technical documentation.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const components = document.querySelectorAll('.component');
            components.forEach(component => {
                component.addEventListener('click', () => {
                    const targetId = component.dataset.target;
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        targetElement.classList.add('animate-pulse-once');
                        setTimeout(() => targetElement.classList.remove('animate-pulse-once'), 1000);
                    }
                });
            });

            const generateBtn = document.getElementById('generate-link-btn');
            const demoOutput = document.getElementById('demo-output');
            const urlOutput = document.getElementById('presigned-url-output');
            const fileSelect = document.getElementById('file-select');

            generateBtn.addEventListener('click', () => {
                const bucketName = 'my-secure-file-transfer-bucket';
                const region = 'us-east-1';
                const selectedFile = fileSelect.value;
                const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
                const fakeSignature = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
                const fakeAccessKey = 'ASIA' + Math.random().toString(36).substring(2, 18).toUpperCase();

                const presignedUrl = `https://${bucketName}.s3.${region}.amazonaws.com/${selectedFile}?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=${fakeAccessKey}%2F${timestamp.substring(0,8)}%2F${region}%2Fs3%2Faws4_request&X-Amz-Date=${timestamp}&X-Amz-Expires=300&X-Amz-SignedHeaders=host&X-Amz-Signature=${fakeSignature}`;
                
                urlOutput.textContent = presignedUrl;
                demoOutput.style.display = 'block';
            });
        });
    </script>
</body>
</html>
